function formatter(){return this}function OptionHandler(e){var t=e;this.update=(e=>{if("object"==typeof e)for(const a in e)t[a]=e[a];else console.warn("Passed options are not 'typeof object'! Terminated option builder.");return t});return this}function Chart(){var e=0,t=0,a={style:{backgroundColor:"#282c34",uiColor:"#9da5b4",series:{color:"#f45b5b",semiTransparent:"rgba(244, 91, 91, 1)"},tooltip:{background:["#14161a","#21252b"],color:"#9da5b4"}},dataGrouping:{enabled:!1,groupCount:10},crossHair:{enabled:!0,dot:!1},barWidth:20,drawRays:!1,scaleSteps:8},s={horizontalSpace:0,verticalMultiplier:1,highestValue:0,waypointCount:10,waypointArrayLength:0};Object.defineProperties(this,{env:{get:function(){return s},set:function(e){return s=new OptionHandler(s).update(e)}},options:{get:function(){return a},set:function(e){return a=new OptionHandler(a).update(e)}},data:{get:function(){return h},set:function(){console.warn("Please use chart.setData() to set a new dataset.")}}});var r,i=document.createElement("canvas"),o=(document.createElement("div"),40),l=[],n=null,h={};this.properties={get context(){return r}};var d,c=this.quicksort=(e=>{if(e.length>=1){var t=e[Math.floor(Math.random()*e.length)],a=[],s=[],r=[];for(let i=0;i<e.length;i++)e[i]!=t?e[i]<t?a.push(e[i]):e[i]>t?s.push(e[i]):a.push(e[i]):r.push(t);s=c(s),e=(a=c(a)).concat(r).concat(s)}return e}),u=this.drawTooltip=((t,s,i)=>{r.save(),r.beginPath(),r.fillStyle=a.style.tooltip.background[0];var o=r.measureText(i).width+10;let l=r.measureText(i),n=l.actualBoundingBoxAscent+l.actualBoundingBoxDescent;var h=n+10;r.beginPath();var d=0,c=0,u=1;o+t>e&&(c=(d=-1*(o+40))+o,u=-1),r.moveTo(t+c,s),r.lineTo(t+-10*u+c,s+h/2),r.lineTo(t+c,s+h),r.lineTo(t+1*u+c,s+h),r.lineTo(t+1*u+c,s),r.fill(),r.closePath(),r.fillRect(t+d,s,o,h),r.closePath(),r.beginPath(),r.fillStyle=a.style.tooltip.color,r.fillText(i,t+5+d,s+2.5+n),r.closePath(),r.restore()}),y=this.getMousePos=(e=>{var t=i.getBoundingClientRect(),a=i.width/i.width,s=i.height/t.height;return{x:(e.clientX-t.left)*a,y:(e.clientY-t.top)*s}}),p=this.getClosestPoint=((a,s)=>{var r=(e-2*o)/h.series.data.length,i=c(h.series.data)[h.series.data.length-1],l=(t-60-10)/i,n=[];return h.series.data.forEach((e,i)=>{var h=o+1+(i+1)*r-a,d=t-30-e*l-s;n.push([Math.sqrt(h*h+d*d),i])}),(n=function e(t){if(t.length>=1){var a=t[Math.floor(Math.random()*t.length)],s=[],r=[],i=[];for(let e=0;e<t.length;e++)t[e][0]!=a[0]?t[e][0]<a[0]?s.push(t[e]):t[e][0]>a[0]?r.push(t[e]):s.push(t[e]):i.push(a);r=e(r),t=(s=e(s)).concat(i).concat(r)}return t}(n))[0][1]}),f=this.drawRays=((a,s)=>{r.save();var i=(e-2*o)/h.series.data.length,l=c(h.series.data)[h.series.data.length-1],n=(t-60-10)/l;h.series.data.forEach((e,l)=>{r.beginPath(),r.strokeStyle="green",r.moveTo(a,s),r.lineTo(o+1+(l+1)*i,t-30-e*n),r.stroke(),r.closePath()}),r.restore()}),g=this.handleHover=((s,i)=>{switch(h.series.type){case"spline":if(s>o&&s<e-o&&i>30&&i<t-30){var l=p(s,i);(n!=l||a.crossHair.enabled||a.drawRays)&&w(l),a.drawRays&&f(s,i),r.save(),!0===a.crossHair.enabled&&(r.beginPath(),r.strokeStyle=a.style.uiColor,r.moveTo(o,i),r.lineTo(s,i),r.moveTo(s,t-30),r.lineTo(s,i),r.stroke(),r.closePath(),!0===a.crossHair.dot&&(r.beginPath(),r.arc(s,i,3,0,2*Math.PI,!1),r.fill(),r.closePath())),r.beginPath(),r.fillStyle=a.style.uiColor,r.font="normal 15px normal";var d=(e-2*o)/h.series.data.length,y=c(h.series.data)[h.series.data.length-1],g=(t-60-10)/y;r.stroke(),(n!=l||a.drawRays||a.crossHair.enabled)&&(u(o+20+(l+1)*d,t-30-h.series.data[l]*g-10,h.series.style.label.format.replace(/%value%/g,h.series.data[l])),n=l),r.closePath(),r.restore()}else(s<o||s>e-o||i<30||i>t-30)&&w();break;case"bar":if(s>o&&s<e-o&&i>30&&i<t-30){l=p(s,i);w(l),r.save(),r.beginPath(),r.strokeStyle=a.style.uiColor,r.moveTo(o,i),r.lineTo(s,i),r.moveTo(s,t-30),r.lineTo(s,i),r.stroke(),r.closePath(),r.restore()}else(s<o||s>e-o||i<30||i>t-30)&&w();break;case"bezier":if(s>o&&s<e-o&&i>30&&i<t-30){l=p(s,i);(n!=l||a.crossHair.enabled||a.drawRays)&&w(l),a.drawRays&&f(s,i),r.save(),!0===a.crossHair.enabled&&(r.beginPath(),r.strokeStyle=a.style.uiColor,r.moveTo(o,i),r.lineTo(s,i),r.moveTo(s,t-30),r.lineTo(s,i),r.stroke(),r.closePath(),!0===a.crossHair.dot&&(r.beginPath(),r.arc(s,i,3,0,2*Math.PI,!1),r.fill(),r.closePath())),r.beginPath(),r.fillStyle=a.style.uiColor,r.font="normal 15px normal";d=(e-2*o)/h.series.data.length,y=c(h.series.data)[h.series.data.length-1],g=(t-60-10)/y;r.stroke(),(n!=l||a.drawRays||a.crossHair.enabled)&&(u(o+20+(l+1)*d,t-30-h.series.data[l]*g-10,h.series.style.label.format.replace(/%value%/g,h.series.data[l])),n=l),r.closePath(),r.restore()}else(s<o||s>e-o||i<30||i>t-30)&&w();break;default:if(s>o&&s<e-o&&i>30&&i<t-30){l=p(s,i);w(l),r.save(),r.beginPath(),r.strokeStyle=a.style.uiColor,r.moveTo(o,i),r.lineTo(s,i),r.moveTo(s,t-30),r.lineTo(s,i),r.stroke(),r.closePath(),r.restore()}else(s<o||s>e-o||i<30||i>t-30)&&w()}}),v=this.handleScroll=(e=>{}),b=this.xAxis=(()=>{h.xAxis.pointInterval||(h.xAxis.pointInterval=1),r.save(),r.beginPath(),r.translate(o+1,t-30-5),r.strokeStyle=a.style.uiColor,r.fillStyle=a.style.uiColor,r.lineWidth=1;var s=(e-2*o)/h.series.data.length;r.moveTo(0,0),r.lineTo(0,10),r.stroke(),h.xAxis.data.forEach((e,t)=>{r.moveTo((t+1)*h.xAxis.pointInterval*s,0),r.lineTo((t+1)*h.xAxis.pointInterval*s,10),r.stroke(),r.fillText(e,(t+1)*h.xAxis.pointInterval*s-r.measureText(e).width/2,20)}),h.xAxis.start&&(r.moveTo(0,0),r.fillText(h.xAxis.start,r.measureText(h.xAxis.start).width/2*-1,20)),r.closePath(),r.restore()}),x=this.yAxis=(()=>{r.save(),r.lineWidth=2,r.strokeStyle=a.style.uiColor;var e=c(h.series.data)[h.series.data.length-1],s=(t-60-10)/e,i=a.scaleSteps;for(let l=1;l<=i;l++){r.beginPath();let n=e/i*l;r.moveTo(o-5,t-30-n*s),r.lineTo(o+5,t-30-n*s),r.stroke(),r.closePath(),r.beginPath(),r.direction="rlt",r.fillStyle=a.style.uiColor,r.fillText(n,(o-r.measureText(n.toString()).width)/2,t-30+3-n*s),r.closePath()}r.restore()}),m=this.drawSpline=(s=>{r.save(),r.lineWidth=1,r.strokeStyle=a.style.series.color,r.fillStyle=a.style.series.color;var i=(e-2*o)/h.series.data.length,l=c(h.series.data)[h.series.data.length-1],n=(t-60-10)/l;h.series.options.displayKnots&&(r.beginPath(),r.arc(o+1,t-30,3,0,2*Math.PI,!1),r.fill(),r.closePath(),r.stroke()),r.beginPath(),r.lineJoin="round",h.series.data.forEach((e,a)=>{e*=n,h.series.options.displayKnots&&(r.beginPath(),r.arc(o+1+(a+1)*i,t-30-e,3,0,2*Math.PI,!1),r.fill(),r.closePath(),r.stroke()),0!=a?r.moveTo(o+1+(a+0)*i,t-30-h.series.data[a-1]*n):r.moveTo(o+1,t-30),r.lineTo(o+1+(a+1)*i,t-30-e),r.stroke()}),r.closePath(),s&&h.series.options.displayKnots&&(r.beginPath(),r.fillStyle=a.style.series.semiTransparent,r.arc(o+1+(s+1)*i,t-30-h.series.data[s]*n,4,0,2*Math.PI,!1),r.fill(),r.stroke(),r.closePath()),r.restore()}),T=this.drawBars=(s=>{r.save(),r.fillStyle=a.style.series.color;var i=(e-2*o)/h.series.data.length,l=c(h.series.data)[h.series.data.length-1],n=(t-60-10)/l;h.series.data.forEach((e,s)=>{r.beginPath(),r.fillRect(o+1+(s+1)*i-a.barWidth/2,t-30-e*n-1,a.barWidth,e*n),r.closePath()}),r.restore()}),P=this.drawBezier=(e=>{r.save(),r.fillStyle=a.style.series.color,r.strokeStyle=a.style.series.color;for(let e=0;e<=h.series.data.length;e++){let a={x:o+1+(e+1)*s.horizontalSpace,y:t-30-h.series.data[e]*s.verticalMultiplier},i={x:o+1+(e+2)*s.horizontalSpace,y:t-30-h.series.data[e+1]*s.verticalMultiplier},l={x:a.x+(i.x-a.x)/2,y:a.y},n={x:a.x+(i.x-a.x)/2,y:i.y};0!=e?(r.moveTo(a.x,a.y),r.bezierCurveTo(l.x,l.y,n.x,n.y,i.x,i.y),r.stroke(),r.beginPath(),r.arc(o+1+(e+1)*s.horizontalSpace,t-30-h.series.data[e]*s.verticalMultiplier,3,0,2*Math.PI,!1),r.fill(),r.closePath()):(h.series.options.displayKnots&&(r.beginPath(),r.arc(o+1,t-30,3,0,2*Math.PI,!1),r.fill(),r.closePath()),r.moveTo(o+1,t-30),r.bezierCurveTo(l.x,l.y,n.x,n.y,i.x,i.y))}e&&h.series.options.displayKnots&&(r.beginPath(),r.fillStyle=a.style.series.semiTransparent,r.arc(o+1+(e+1)*s.horizontalSpace,t-30-h.series.data[e]*s.verticalMultiplier,4,0,2*Math.PI,!1),r.fill(),r.stroke(),r.closePath()),r.restore()}),w=this.update=(s=>{if(r.lineJoin="round",r.save(),r.beginPath(),r.fillStyle=a.style.backgroundColor,r.fillRect(0,0,e,t),r.fillStyle=a.style.uiColor,r.strokeStyle=a.style.uiColor,r.lineWidth=1,r.moveTo(o,t-30),r.lineTo(e-o,t-30),r.moveTo(o,30),r.lineTo(o+1,t-30),r.stroke(),r.closePath(),r.restore(),h.series){if(b(),x(),h.series.name){r.save(),r.beginPath(),r.translate(0,20),r.fillStyle=a.style.series.color,r.font="normal 16px Calibri";let e=o/2-r.measureText(h.series.name).width/2>=2?o/2-r.measureText(h.series.name).width/2:2;r.fillText(h.series.name,e,0),r.closePath(),r.restore()}switch(h.series.type){case"spline":m(s);break;case"bar":T(s);break;case"bezier":P(s)}}});var S=1,k=0,C=this.animatedSpline=(()=>{r.save(),r.lineJoin="round",r.lineWidth=2,r.strokeStyle=a.style.series.color,r.fillStyle=a.style.series.color,S<d.length-1?requestAnimationFrame(C):(S=1,w()),r.beginPath(),r.moveTo(d[S-1].x,d[S-1].y),r.lineTo(d[S].x,d[S].y),r.stroke(),r.restore(),S++}),M=this.animatedBars=(()=>{S<d[0].length-1?requestAnimationFrame(M):k>=d.length-1?(S=1,k=0,w()):k<d.length-1&&requestAnimationFrame(M);var e=d[k][S].x-a.barWidth/2,t=d[k][S-1].y,i=-1*Math.abs(d[k][S].y-t);r.save(),r.beginPath(),r.lineJoin="round",r.lineWidth=2,r.strokeStyle=a.style.series.color,r.fillStyle=a.style.series.color,r.fillRect(e,t-h.series.data[k]*s.verticalMultiplier,a.barWidth,i),d[k][S+1]||(S=1,k++),r.restore(),S++,0});this.setData=(i=>{if((h=i).series.data)if(a.yScale){if("auto"==a.yScale.spaceComputing){var n=c(h.series.data)[h.series.data.length-1],u=[],y=a.scaleSteps;for(let e=1;e<=y;e++){let t=n/y*e;u.push(r.measureText(t))}u.sort();let e=u[u.length-1];var p=r.measureText(e).width;(f=o-11-p)<0&&(o+=Math.abs(f))}else if("highestValue"==a.yScale.spaceComputing){p=r.measureText(n).width;(f=o-11-p)<0&&(o+=Math.abs(f))}}else{var f;p=r.measureText(n).width;(f=o-11-p)<0&&(o+=Math.abs(f))}if(h.options){var g=new OptionHandler(a);a=g.update(h.options)}if(h.options.dataGrouping.enabled){h;let e=[],t=a.dataGrouping.groupCount;for(let a=0;a<h.series.data.length&&h.series.data[a];a+=t){let s=[];for(let e=a;e<a+t&&h.series.data[e];e++)s.push(h.series.data[e]);e.push(s.reduce((e,t)=>e+t)/s.length)}h.series.data=e}var v=(e-2*o)/h.series.data.length;s.horizontalSpace=v,h.xAxis.data.forEach((e,t)=>{l.push(o+(t+1)*v)}),r.clearRect(0,0,e,t);n=c(h.series.data)[h.series.data.length-1];var m=(t-60-10)/n;if(s.highestValue=n,s.verticalMultiplier=m,r.lineJoin="miter",r.save(),r.beginPath(),r.fillStyle=a.style.backgroundColor,r.fillRect(0,0,e,t),r.fillStyle=a.style.uiColor,r.strokeStyle=a.style.uiColor,r.lineWidth=1,r.moveTo(o,t-30),r.lineTo(e-o,t-30),r.moveTo(o,30),r.lineTo(o+1,t-30),r.stroke(),r.closePath(),r.restore(),h.series){if(b(),x(),h.series.name){r.save(),r.beginPath(),r.translate(0,20),r.fillStyle=a.style.series.color,r.font="normal 16px Calibri";let e=o/2-r.measureText(h.series.name).width/2>=2?o/2-r.measureText(h.series.name).width/2:2;r.fillText(h.series.name,e,0),r.closePath(),r.restore()}if(h.options.animations.enabled)switch(h.series.type){case"spline":(T=[]).push({x:o+1,y:t-30}),h.series.data.forEach((e,a)=>{T.push({x:o+1+(a+1)*v,y:t-30-e*m})}),d=function(e){for(var t=[],a=1;a<e.length;a++)for(var r=e[a-1],i=e[a],o=i.x-r.x,l=i.y-r.y,n=0;n<s.waypointCount;n++){var h=r.x+o*n/s.waypointCount,d=r.y+l*n/s.waypointCount;t.push({x:h,y:d})}return t}(T),window.requestAnimationFrame(C);break;case"bar":var T=[];h.series.data.forEach((e,a)=>{let s={x:o+1+(a+1)*v,y:t-30},r={x:o+1+(a+1)*v,y:t-30-e*m};T.push([s,r])}),d=function(e,t){var a=[];for(let t=0;t<e.length;t++){let c=e[t];var r=c[0],i=c[1],o=i.x-i.x,l=i.y-r.y;for(let e=0;e<s.waypointCount;e++){var n=-.75*e,h=r.x+o*n/s.waypointCount,d=r.y+l*n/s.waypointCount;a.push({x:h,y:d})}}return a}(T),s.waypointArrayLength=d.length,barWaypoints=[];var S=0,k=-1;d.forEach((e,t)=>{e.x!=S?(S=e.x,barWaypoints[++k]=[e]):barWaypoints[k].push(e)}),d=barWaypoints,window.requestAnimationFrame(M);break;case"bezier":P()}else w()}}),this.render=(a=>{document.querySelector(".chart").appendChild(i),i.width=a?a.width:600,i.height=a?a.height:300,i.addEventListener("mousemove",function(e){var t=y(e);g(t.x,t.y)}),i.addEventListener("mouseout",function(e){n=null,w()}),i.addEventListener("mousewheel",function(e){v(e)}),e=i.getBoundingClientRect().width,t=i.getBoundingClientRect().height,r=i.getContext("2d"),w()});return this}
